!function(){var e=/\[(.+?)\]\((.+?)\)/g,n=500,t="glyphicon glyphicon-ok",i=.8,a=function(){var e=$("#profiles li").width(),n=i*e+"px";$("#profiles i").css({"font-size":n})},o=function(e){var n=$("<ul />",{"class":"timeline"});return _.each(e.events,function(t,i){c({event:t,exclude:e.exclude,index:i}).appendTo(n)}),n},c=function(e){var n=$("<li />",{"class":e.index.isEven()?null:"timeline-inverted"}),i=$("<div />",{"class":"timeline-badge"}).appendTo(n);$("<i />",{"class":e.event.icon||t}).appendTo(i);var a=$("<div />",{"class":"timeline-panel"}).appendTo(n),o=$("<div />",{"class":"timeline-heading"}).appendTo(a);return $("<h3 />",{"class":"timeline-title",text:e.event.title}).appendTo(o),$("<p />",{"class":"text-muted",html:'<i class="fa fa-clock-o"></i>&nbsp;'+(e.event.from?e.event.from+" - ":"")+(e.event.to||"present")}).appendTo(o),_.contains(e.exclude,"technologies")||$("<p />",{html:'<i class="fa fa-rocket"></i>&nbsp;'+e.event.technologies}).appendTo(o),$("<div />",{"class":"timeline-body",html:e.event.html}).appendTo(a),n},l=function(){_.each(["projects","studies"],function(e,n){$.ajax({dataType:"json",success:function(t){f({container:$("#"+e),events:u(t),exclude:0===n?[]:["technologies"]})},url:"/data/"+e+".json"})})},s=function(){a(),l(),r(),p()},r=function(){$("a.mailto").on("click",function(e){e.preventDefault(),email_address=$(this).html().replace(" [at] ","@").replace(" [dot] ","."),window.location.assign("mailto:"+email_address)})},u=function(n){return _.map(n,function(n){return _.extend(n,{html:n.html.replace(e,function(e,n,t){return'<a href="'+t+'" target="_blank">'+n+"</a>"})})})},d=function(e){if(e.from){var n=e.from.match(/\w+/g),t=n[0]-1,i=n[1];return new Date(i,t).getTime()}return Number.MAX_VALUE},f=function(e){var n=o({events:_.sortBy(e.events,function(e){return-d(e)}),exclude:e.exclude});e.container.children("div.ajax").html(n)},p=function(){$("a.navbar-brand, ul.nav li a").on("click",function(e){e.preventDefault();var t=this.hash;$("body, html").animate({scrollTop:$(t).offset()?$(t).offset().top:0},n,function(){window.location.hash=t})})};$(function(){s(),$(window).resize(a)})}(),function(){Number.prototype.isEven=function(){return this%2===0}}.call(this);